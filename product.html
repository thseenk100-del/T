<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>تفاصيل الخدمة | تحسينك</title>
<link rel="stylesheet" href="css/styles.css">

<style>

/* ===== PAGE LAYOUT ===== */
.product-wrapper{
  max-width:1000px;
  margin:auto;
  padding:60px 20px;
}

.product-title{
  font-size:28px;
  font-weight:700;
  margin-bottom:15px;
}

.product-price{
  font-size:20px;
  color:#0B6B3A;
  font-weight:700;
  margin-bottom:20px;
}

.product-description{
  line-height:1.9;
  margin-bottom:40px;
}

/* ===== IMAGE SECTION ===== */

.main-image{
  width:100%;
  max-height:600px;
  height:auto;
  object-fit:contain;
  border-radius:20px;
  cursor:pointer;
  box-shadow:0 20px 50px rgba(0,0,0,0.1);
  margin-bottom:25px;
  background:#f5f5f5;
}

.thumb-gallery{
  display:flex;
  gap:10px;
  overflow-x:auto;
}

.thumb-gallery img{
  width:90px;
  height:90px;
  object-fit:cover;
  border-radius:12px;
  cursor:pointer;
  opacity:0.7;
  transition:0.3s;
}

.thumb-gallery img:hover{
  opacity:1;
  transform:scale(1.05);
}

/* ===== LIGHTBOX ===== */

.lightbox{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:2000;
}

.lightbox img{
  max-width:90%;
  max-height:90%;
  border-radius:20px;
}

.lightbox.close{
  cursor:pointer;
}

/* ===== ACTION BUTTONS ===== */

.actions{
  margin-top:40px;
  display:flex;
  gap:15px;
  flex-wrap:wrap;
}

.actions a{
  flex:1;
  text-align:center;
  padding:14px;
  border-radius:30px;
  font-weight:700;
  text-decoration:none;
}

.whatsapp-btn{
  background:#0B6B3A;
  color:#fff;
}

.telegram-btn{
  background:#0088cc;
  color:#fff;
}

/* ===== FIXED WHATSAPP BAR ===== */

.fixed-order{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:#0B6B3A;
  color:#fff;
  text-align:center;
  padding:15px;
  font-weight:700;
  z-index:1500;
}

.fixed-order a{
  color:#fff;
  text-decoration:none;
  display:block;
}

@media(max-width:768px){
  .main-image{
    height:300px;
  }
}
/* ===== FLOATING SOCIAL BUTTONS ===== */

.floating-buttons{
  position:fixed;
  bottom:25px;
  left:25px;
  display:flex;
  flex-direction:column;
  gap:12px;
  z-index:3000;
}

.float-btn{
  width:52px;
  height:52px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 10px 25px rgba(0,0,0,0.2);
  transition:0.3s ease;
}

.float-btn img{
  width:26px;
  height:26px;
}

.float-btn:hover{
  transform:translateY(-4px);
}

.whatsapp-float{
  background:#25D366;
}

.telegram-float{
  background:#0088cc;
}
</style>
</head>

<body>

<div class="product-wrapper">

  <h1 id="productName" class="product-title"></h1>
  <div id="productPrice" class="product-price"></div>
  <p id="productDescription" class="product-description"></p>

  <img id="mainImage" class="main-image">

  <div id="thumbGallery" class="thumb-gallery"></div>

  <div class="actions">
    <a id="orderBtn" class="whatsapp-btn" target="_blank">طلب عبر واتساب</a>
    <a href="https://t.me/Tahsenk" target="_blank" class="telegram-btn">قناة تيليجرام</a>
  </div>

</div>

<div id="lightbox" class="lightbox" onclick="closeLightbox()">
  <img id="lightboxImg">
</div>



<script>

const urlParams = new URLSearchParams(window.location.search);
const id = urlParams.get("id");

fetch("data/products.json")
.then(res=>res.json())
.then(data=>{

  const product=data[id];
  if(!product) return;

  document.getElementById("productName").innerText=product.name;
  document.getElementById("productDescription").innerText=product.description;
  document.getElementById("productPrice").innerText=product.price + " ريال";

const waLink=`https://wa.me/966551961517?text=السلام عليكم، أرغب بطلب ${product.name}`;
document.getElementById("orderBtn").href=waLink;
document.getElementById("floatWhatsapp").href = waLink;  

  const mainImage=document.getElementById("mainImage");
  const gallery=document.getElementById("thumbGallery");

  const formats=["webp","jpg","jpeg","png"];
  const basePath=`images/products/product${id}/`;

  let firstImageSet=false;

  for(let i=1;i<=20;i++){

    formats.forEach(ext=>{
      const path=`${basePath}${i}.${ext}`;
      const test=new Image();

      test.onload=function(){

        if(!firstImageSet){
          mainImage.src=path;
          firstImageSet=true;
        }

        const thumb=document.createElement("img");
        thumb.src=path;
        thumb.onclick=function(){
          mainImage.src=path;
        };

        gallery.appendChild(thumb);
      };

      test.src=path;
    });

  }

});

function closeLightbox(){
  document.getElementById("lightbox").style.display="none";
}

document.getElementById("mainImage").onclick=function(){
  const lightbox=document.getElementById("lightbox");
  const img=document.getElementById("lightboxImg");
  img.src=this.src;
  lightbox.style.display="flex";
};

</script>
<div class="floating-buttons">

  <a id="floatWhatsapp" class="float-btn whatsapp-float" target="_blank">
    <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png">
  </a>

  <a href="https://t.me/Tahsenk" target="_blank" class="float-btn telegram-float">
    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png">
  </a>

</div>
</body>
</html>
